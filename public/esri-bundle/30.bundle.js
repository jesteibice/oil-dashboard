(function(){(this||window).webpackJsonp.registerAbsMids({"esri/geometry/support/loadGLTFMesh":2134})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{2134:function(e,t,r){var n,a;n=[r.dj.c(e.i),t,r(9),r(11),r(4),r(14),r(94),r(78),r(841),r(842),r(515),r(861),r(862),r(863),r(110),r(864),r(381),r(165)],void 0===(a=function(e,t,r,n,a,o,u,c,i,f,s,l,p,m,w,d,v,B){function V(e,t,r,n,f){var l=v.createBuffer(w.BufferViewVec3f64,n.attributes.position.count);d.vec3.transformMat4(l,n.attributes.position,n.transform);var p=o.applySome(n.attributes.normal,function(e){var t=v.createBuffer(w.BufferViewVec3f,e.count),r=u.mat3.normalFromMat4(c.mat3f64.create(),n.transform);return d.vec3.transformMat3(t,e,r),t.typedBuffer}),m=o.applySome(n.attributes.tangent,function(e){var t=v.createBuffer(w.BufferViewVec4f,e.count),r=u.mat3.normalFromMat4(c.mat3f64.create(),n.transform);return d.vec4.transformMat3(t,e,r),t.typedBuffer}),V=o.applySome(n.attributes.texCoord0,function(e){var t=v.createBuffer(w.BufferViewVec2f,e.count);return v.vec2.normalizeIntegerBuffer(t,e),t.typedBuffer}),b=o.applySome(n.attributes.color,function(e){var t=v.createBuffer(w.BufferViewVec4u8,e.count);if(4===e.elementCount)e instanceof w.BufferViewVec4f?d.vec4.scale(t,e,255):e instanceof w.BufferViewVec4u8?v.vec4.copy(t,e):e instanceof w.BufferViewVec4u16&&d.vec4.scale(t,e,1/255);else{v.vec4.fill(t,255,255,255,255);var r=new w.BufferViewVec3u8(t.buffer,0,4);e instanceof w.BufferViewVec3f?d.vec3.scale(r,e,255):e instanceof w.BufferViewVec3u8?v.vec3.copy(r,e):e instanceof w.BufferViewVec3u16&&d.vec3.scale(r,e,1/255)}return t.typedBuffer}),g=s.georeference({position:l.typedBuffer,normal:o.unwrap(p),tangent:o.unwrap(m)},e,a({},f,{unit:"meters"})),y=h(n.indices||n.attributes.position.count,n.primitiveType),M=t.materials.get(n.material),S=B.COLOR_GAMMA,T=[255*Math.pow(M.color[0],1/S),255*Math.pow(M.color[1],1/S),255*Math.pow(M.color[2],1/S),M.opacity];return{vertexAttributes:{position:g.position,normal:g.normal,tangent:g.tangent,uv:o.unwrap(V),color:o.unwrap(b)},components:[{faces:y,material:new i.default({color:T,colorTexture:o.unwrap(o.applySome(M.textureColor,function(e){return r.get(e)})),normalTexture:o.unwrap(o.applySome(M.textureNormal,function(e){return r.get(e)})),alphaMode:function(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}(M.alphaMode),alphaCutoff:M.alphaCutoff,doubleSided:M.doubleSided}),trustSourceNormals:!0}],spatialReference:e.spatialReference}}function h(e,t){switch(t){case 4:return m.trianglesToTriangles(e);case 5:return m.triangleStripToTriangles(e);case 6:return m.triangleFanToTriangles(e)}}function b(e){switch(e){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadGLTFMesh=function(e,t,a){return n(this,void 0,void 0,function(){var n,o,u,c,i;return r(this,function(r){switch(r.label){case 0:return n=new l.DefaultLoadingContext,[4,p.load(n,t,a)];case 1:return o=r.sent(),u=o.model,c=u.lods.shift(),i=new Map,u.textures.forEach(function(e,t){i.set(t,new f({data:e.data,wrap:function(e){return{horizontal:b(e.s),vertical:b(e.t)}}(e.parameters.wrap)}))}),[2,c.parts.map(function(t){return V(e,u,i,t,a)})]}})})}}.apply(null,n))||(e.exports=a)}}]);