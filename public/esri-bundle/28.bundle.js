(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/layers/SceneLayerWorker":2123,"esri/views/3d/layers/i3s/I3SGeometryUtil":2228,"esri/views/3d/layers/i3s/I3SProjectionUtil":2229})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2123:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r(9),r(11),r(135),r(15),r(7),r(24),r(21),r(476),r(2201),r(10),r(6),r(32),r(480),r(2247),r(2184),r(2228),r(2229),r(2182),r(2195),r(38),r(828),r(22)],void 0===(n=function(e,t,r,a,n,o,s,i,c,f,u,d,l,v,y,h,m,A,p,b,E,g,I,w){function x(e){return null==e.geometryIndex.header}function M(e,t){var r=new Array,a=e.layouts[0],s=e.geometryBuffer,c=new C.DecoderBuffer;c.Init(new Int8Array(s),s.byteLength);var f=new C.Decoder,u=new C.Mesh,d=f.DecodeBufferToMesh(c,u);if(!d.ok())throw C.destroy(u),C.destroy(f),C.destroy(c),new o("draco:decode_error","Error while decoding draco geometry",{message:d.error_msg()});var l=new C.DracoInt32Array,y=new C.MetadataQuerier,h=f.GetAttributeIdByMetadataEntry(u,"i3s-attribute-type","feature-index"),m=f.GetAttributeMetadata(u,h);y.GetIntEntryArray(m,"i3s-feature-ids",l);var b=l.size(),E=C._malloc(4*b);if(!l.GetArray(E,b))throw"GetArray failed";var g=new Uint32Array(C.HEAPU8.buffer,E,b).slice();C._free(E);var x=u.num_points(),M=3*u.num_faces(),T=x<65536;if(E=C._malloc(M*(T?2:4)),!(T?f.GetTrianglesUInt16Array(u,E,M):f.GetTrianglesUInt32Array(u,E,M)))throw"GetTrianglesArray failed";var S=T?new Uint16Array(C.HEAPU8.buffer,E,M).slice():new Uint32Array(C.HEAPU8.buffer,E,M).slice();C._free(E);var P=function(e,t){for(var r=new Array,a=0;a<e.length;++a){for(var n=e[a],o=t[n];r.length<=o;)r.push(new Array);r[o].push(n)}for(var s=0,i=new Uint32Array(r.length+1),a=0;a<r.length;++a){var c=r[a];i[a]=s;for(var f=0,u=c;f<u.length;f++){var n=u[f];e[s++]=n}}return i[r.length]=s,i}(S,function(e,t,r,a){var n=4*e,s=C._malloc(n),i=t.GetAttribute(r,a);if(!t.GetAttributeUInt32ArrayForAllPoints(r,i,s,e))throw new o("draco:decode_error","Error while getting attribute values",{attributeId:a});var c=new Uint32Array(C.HEAPU8.buffer,s,e).slice();return C._free(s),c}(x,f,u,h)),_=a[0].stride/Float32Array.BYTES_PER_ELEMENT,N=new Float32Array(_*x),U=new I(N,a,null,P,S),G=f.GetAttributeId(u,C.POSITION),L=O(3*x,f,u,G),D=U.getAttribute(w.VertexAttrConstants.POSITION),B=f.GetAttributeMetadata(u,G),k=y.GetDoubleEntry(B,"i3s-scale_x"),F=y.GetDoubleEntry(B,"i3s-scale_y");k=k<=0?1:k,F=F<=0?1:F;for(var j=U.getAttribute(w.VertexAttrConstants.COLOR),Y=f.GetAttributeId(u,C.COLOR),J=-1!==Y,z=J?function(e,t,r,a){var n=e,s=C._malloc(n),i=t.GetAttribute(r,a);if(!t.GetAttributeUInt8ArrayForAllPoints(r,i,s,e))throw new o("draco:decode_error","Error while getting attribute values",{attributeId:a});var c=new Uint8Array(C.HEAPU8.buffer,s,e).slice();return C._free(s),c}(4*x,f,u,Y):n.fill(new Array(4*x),255),q=0;q<x;q++){var H=q*D.strideIdx+D.offsetIdx;D.data[H]=L[3*q]*k,D.data[H+1]=L[3*q+1]*F,D.data[H+2]=L[3*q+2];var X=q*j.strideIdx+j.offsetIdx;j.data[X]=z[4*q],j.data[X+1]=z[4*q+1],j.data[X+2]=z[4*q+2],j.data[X+3]=z[4*q+3]}var Z=f.GetAttributeId(u,C.NORMAL),W=U.getAttribute(w.VertexAttrConstants.NORMAL);if(-1!==Z&&W){var Q=O(3*x,f,u,Z);for(q=0;q<x;q++){var K=q*W.strideIdx+W.offsetIdx;W.data[K]=Q[3*q],W.data[K+1]=Q[3*q+1],W.data[K+2]=Q[3*q+2]}}else e.needNormals&&W&&A.computeCompressedNormals({normals:U.getAttribute(w.VertexAttrConstants.NORMALCOMPRESSED),positions:U.getAttribute(w.VertexAttrConstants.POSITION),normalInd:U.getIndices(w.VertexAttrConstants.NORMALCOMPRESSED),positionInd:U.getIndices(w.VertexAttrConstants.POSITION)});var $=f.GetAttributeId(u,C.TEX_COORD),ee=U.getAttribute(w.VertexAttrConstants.UV0);if(-1!==$&&ee){var te=O(2*x,f,u,$);for(q=0;q<x;q++){K=q*ee.strideIdx+ee.offsetIdx;ee.data[K]=te[2*q],ee.data[K+1]=te[2*q+1]}}var re=f.GetAttributeIdByMetadataEntry(u,"i3s-attribute-type","uv-region"),ae=U.getAttribute(w.VertexAttrConstants.REGION);if(-1!==re&&ae){var ne=function(e,t,r,a){var n=2*e,s=C._malloc(n),i=t.GetAttribute(r,a);if(!t.GetAttributeUInt16ArrayForAllPoints(r,i,s,e))throw new o("draco:decode_error","Error while getting attribute values",{attributeId:a});var c=new Uint16Array(C.HEAPU8.buffer,s,e).slice();return C._free(s),c}(4*x,f,u,re);for(q=0;q<x;q++){K=q*ae.strideIdx+ae.offsetIdx;ae.data[K]=ne[4*q],ae.data[K+1]=ne[4*q+1],ae.data[K+2]=ne[4*q+2],ae.data[K+3]=ne[4*q+3]}}var oe=U.getAttribute(w.VertexAttrConstants.COMPONENTINDEX);oe&&R(oe,P),C.destroy(y),C.destroy(l),C.destroy(u),C.destroy(f),C.destroy(c);var se=e.mbs,ie=e.elevationOffset,ce=v.fromJSON(e.indexSR),fe=v.fromJSON(e.vertexSR),ue=v.fromJSON(e.renderSR),de=p.computeGlobalTransformation(se,ie,ce,ue);i.mat4.invert(V,de);var le=U.getAttribute(w.VertexAttrConstants.POSITION),ve={globalTrafo:de},ye=N.buffer;p.reprojectPoints(le,se,V,ie,ce,fe,ue);var he=A.extractPositionData(ye,a,S);return r.push({layout:a,interleavedVertexData:ye,indices:S,corMatrices:ve,hasColors:J,positionData:he}),t&&(t.push(ye),t.push(S.buffer)),{geometryBuffer:s,componentOffsets:P,featureIds:g,transformedGeometries:r,obb:null}}function O(e,t,r,a){var n=4*e,s=C._malloc(n),i=t.GetAttribute(r,a);if(!t.GetAttributeFloatArrayForAllPoints(r,i,s,e))throw new o("draco:decode_error","Error while getting attribute values",{attributeId:a});var c=new Float32Array(C.HEAPU8.buffer,s,e).slice();return C._free(s),c}function T(e,t,r){if(e.halfSize[0]>0){d.vec3.subtract(G,e.center,e.halfSize),d.vec3.add(L,e.center,e.halfSize);for(var a=t.offsetIdx;a<t.data.length;a+=t.strideIdx)G[0]=Math.min(G[0],t.data[a]),G[1]=Math.min(G[1],t.data[a+1]),G[2]=Math.min(G[2],t.data[a+2]),L[0]=Math.max(L[0],t.data[a]),L[1]=Math.max(L[1],t.data[a+1]),L[2]=Math.max(L[2],t.data[a+2]);d.vec3.subtract(e.halfSize,L,G),d.vec3.scale(e.halfSize,e.halfSize,.5),d.vec3.add(e.center,G,L),d.vec3.scale(e.center,e.center,.5)}else{E.compute(t,e);var n=2*Math.sqrt(1+r[0]+r[5]+r[10]);D[0]=(r[9]-r[6])/n,D[1]=(r[2]-r[8])/n,D[2]=(r[4]-r[1])/n,D[3]=.25*n,f.quat.conjugate(D,D),f.quat.multiply(e.quaternion,D,e.quaternion)}}function S(e){for(var t=e.data,r=e.size,a=e.offsetIdx,n=e.strideIdx,o=a;o<t.length;o+=n)for(var s=0;s<r;s++)if(255!==t[o+s])return!0;return!1}function R(e,t){for(var r=e.data,a=e.offsetIdx,n=e.strideIdx,o=r.length/n,s=0,i=a,c=0;c<o;c++)c>=t[s+1]&&s++,r[i]=s,i+=n}function P(e,t,r){e.geometries[0].params.vertexAttributes=r.vertexAttributes;var a,n,o=r.featureAttributes;if(o){if(o.faceRange){var s=m.createTypedView(t,o.faceRange),i=o.faceRange.valuesPerElement,c=o.faceRange.count;a=b.convertFlatRangesToOffsets(s,c,i)}var f=o.id;if(f){n=new Uint32Array(f.count);var u=1,d=m.valueType2TypedArrayClassMap[f.valueType];"UInt64"===f.valueType&&(d=Uint32Array,u=2);for(var l=new d(t,f.byteOffset,f.count*f.valuesPerElement*u),v=0;v<f.count;v++){var y=v*f.valuesPerElement*u;if(n[v]=l[y],2===u&&0!==l[y+1])throw new Error("ID exceeded maximum range supported (2^32))")}}}return{componentOffsets:a,featureIds:n}}var _=65536,N=function(){function e(){}return e.prototype.process=function(t){return a(this,void 0,void 0,function(){var a;return r(this,function(r){switch(r.label){case 0:return[4,e.ensureDracoDecoder(t)];case 1:return r.sent(),a=[t.geometryBuffer],[2,{result:this.transform(t,a),transferList:a}]}})})},e.prototype.transform=function(e,t){return x(e)?M(e,t):function(e,t){var r=e.geometryData,a=e.geometryIndex,n=e.layouts,o=e.mbs,s=e.elevationOffset,c=v.fromJSON(e.indexSR),f=v.fromJSON(e.renderSR),u=p.computeGlobalTransformation(o,s,c,f);i.mat4.invert(V,u);var l=e.geometryBuffer,h=P(r,l,a),m=h.componentOffsets,b=h.featureIds;t&&(b&&t.push(b.buffer),m&&t.push(m.buffer));var x=e.obb?null:E.create([0,0,0],[-1,-1,-1],[0,0,0,1]);d.vec3.copy(G,o),G[2]+=s,d.vec3.copy(L,G);for(var M=!1,O=0,N=new Array,U=0,C=r.geometries;U<C.length;U++){var D=C[U],B=n[O];++O;var k=e.geometryBuffer,F=[{name:w.VertexAttrConstants.COLOR,byteValue:255}],j=[w.VertexAttrConstants.NORMAL,w.VertexAttrConstants.NORMALCOMPRESSED,w.VertexAttrConstants.SYMBOLCOLOR,w.VertexAttrConstants.COMPONENTINDEX],Y=A.interleaveGeometryBuffer(D,k,B,F,j),J=new I(new Float32Array(Y),B),z=J.getAttribute(w.VertexAttrConstants.POSITION),q=e.mbs,H=e.elevationOffset,X=v.fromJSON(e.indexSR),Z=v.fromJSON(e.vertexSR),W=v.fromJSON(e.renderSR);if(p.reprojectPoints(z,q,V,H,X,Z,W),x&&T(x,z,u),e.needNormals){var Q={normals:J.getAttribute(w.VertexAttrConstants.NORMALCOMPRESSED),positions:z,normalInd:J.getIndices(w.VertexAttrConstants.NORMALCOMPRESSED),positionInd:J.getIndices(w.VertexAttrConstants.POSITION)},K=e.normalReferenceFrame;A.processAndInterleaveNormals(K,D,k,u,Q)}var $=J.getAttribute(w.VertexAttrConstants.COMPONENTINDEX);$&&R($,m);var ee=J.getAttribute(w.VertexAttrConstants.COLOR);ee&&!M&&(M=S(ee));var te={globalTrafo:u},re=B[0].stride,ae=1-.8*re/(re+4),ne=y.default(Y,re/4,null,ae);if(null!=ne){var oe=ne.uniqueCount<_?new Uint16Array(ne.indices):ne.indices,se=A.extractPositionData(ne.buffer,B,oe);N.push({layout:B,interleavedVertexData:ne.buffer,indices:oe,corMatrices:te,hasColors:M,positionData:se}),t&&(t.push(ne.buffer),t.push(oe.buffer),t.push(se.data.buffer),t.push(se.indices.buffer))}else se=A.extractPositionData(Y,B),N.push({layout:B,interleavedVertexData:Y,corMatrices:te,hasColors:M,positionData:se}),t&&(t.push(Y),t.push(se.data.buffer),t.push(se.indices.buffer));x&&(d.vec3.transformMat4(x.center,x.center,u),g.vectorToVector(x.center,W,x.center,X),x.center[2]-=e.elevationOffset)}return{geometryBuffer:l,componentOffsets:m,featureIds:b,transformedGeometries:N,obb:x}}(e,t)},e}();!function(e){(N||(N={})).ensureDracoDecoder=function(e){return C&&C.DecoderBuffer||e&&!x(e)?s.resolve():(U||(U=h.getDecoderModule().then(function(e){return U=null,C=e})),U.then(function(){}))}}();var U,C,V=c.mat4f64.create(),G=l.vec3f64.create(),L=l.vec3f64.create(),D=u.quatf32.create();return N}.apply(null,a))||(e.exports=n)},2228:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r(9),r(11),r(7),r(285),r(10),r(354),r(55),r(480),r(2184),r(38),r(22)],void 0===(n=function(e,t,a,n,o,s,i,c,f,u,d,l,v){function y(e,t,r,a,n,o,s){switch(r){case 1:for(var i=0;i<s;i++)a[n]=e[t],t+=1,n+=o;break;case 2:for(i=0;i<s;i++)a[n]=e[t],a[n+1]=e[t+1],t+=2,n+=o;break;case 3:for(i=0;i<s;i++)a[n]=e[t],a[n+1]=e[t+1],a[n+2]=e[t+2],t+=3,n+=o;break;case 4:for(i=0;i<s;i++)a[n]=e[t],a[n+1]=e[t+1],a[n+2]=e[t+2],a[n+3]=e[t+3],t+=4,n+=o;break;default:throw E("Unhandled stride size "+r)}}function h(e,t,r,a,n,o){switch(t){case 1:for(var s=0;s<o;s++)r[a]=e,a+=n;break;case 2:for(s=0;s<o;s++)r[a]=e,r[a+1]=e,a+=n;break;case 3:for(s=0;s<o;s++)r[a]=e,r[a+1]=e,r[a+2]=e,a+=n;break;case 4:for(s=0;s<o;s++)r[a]=e,r[a+1]=e,r[a+2]=e,r[a+3]=e,a+=n;break;default:throw E("Unhandled stride size "+t)}}function m(e){switch(e){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw new Error("Unhandled data type: "+e)}function A(e){switch(e){case 5120:return"Int8";case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw new Error("Unhandled data type: "+e)}function p(e){return e%Uint32Array.BYTES_PER_ELEMENT==0}function b(e){return e>0&&e%Uint32Array.BYTES_PER_ELEMENT==0}function E(e){return new Error("I3SGeometryUtil processing failed: "+e)}function g(e){var t=e.normals,r=e.positions,a=e.normalInd,n=e.positionInd;v.assert(e.normalInd.length===e.positionInd.length);for(var o=c.vec3f32.create(),f=c.vec3f32.create(),u=s.vec2f32.create(),d=r.data,l=r.offsetIdx,y=r.strideIdx,h=t.data,m=t.offsetIdx,A=t.strideIdx,p=0;p<n.length;p+=3){var b=n[p],E=l+y*b,g=d[E],I=d[E+1],w=d[E+2];E=l+y*(b=n[p+1]),o[0]=d[E]-g,o[1]=d[E+1]-I,o[2]=d[E+2]-w,E=l+y*(b=n[p+2]),f[0]=d[E]-g,f[1]=d[E+1]-I,f[2]=d[E+2]-w,i.vec3.cross(o,o,f),v.encodeNormal(o,u);for(var x=0;x<3;x++){var M=m+A*a[p+x];h[M]=v.encodeInt16(u[0]),h[M+1]=v.encodeInt16(u[1])}}}function I(){return!!O}function w(e,t){switch(t){case 0:switch(e.type){case"intersects":case"contains":case"crosses":case"envelope-intersects":case"overlaps":case"touches":case"within":return 1;case"disjoint":return 0}break;case 2:switch(e.type){case"intersects":case"contains":case"envelope-intersects":case"within":return 0;case"disjoint":case"crosses":case"overlaps":case"touches":return 1}break;case 1:switch(e.type){case"envelope-intersects":return 0}}return 2}function x(e,t){return O.contains(e.mask,t)?2:O.intersects(e.mask,t)?1:0}Object.defineProperty(t,"__esModule",{value:!0});var M=new Uint8Array(64);t.interleaveGeometryBuffer=function(e,t,r,a,n){void 0===a&&(a=[]),void 0===n&&(n=[]);var o=e.params.vertexAttributes,s=o.position.count;if(!b(r[0].stride))throw E("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");for(var i=r[0].stride/Uint32Array.BYTES_PER_ELEMENT,c=new Uint32Array(i*s),f=0,u=r=r.slice(0).sort(function(e,t){return e.offset-t.offset});f<u.length;f++)!function(e){if(-1!==n.indexOf(e.name))return"continue";var r=o[e.name],i=m(e.type),f=void 0,u=!1;if(null==r){var d=a.filter(function(t){return t.name===e.name})[0];if(!d)throw E("Geometry definition is missing attribute");r={valueType:A(e.type),byteOffset:0,count:s,valuesPerElement:e.count};for(var l=0;l<M.length;l++)M[l]=d.byteValue;f=M.buffer,u=!0}else f=t;if(A(e.type)!==r.valueType)throw E("Geometry definition type must match attribute type");if(!p(r.byteOffset)||!p(e.offset))throw E(e.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!b(r.valuesPerElement*i.BYTES_PER_ELEMENT)||!b(e.count*i.BYTES_PER_ELEMENT))throw E(e.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var v=new Uint32Array(f),g=r.byteOffset/Uint32Array.BYTES_PER_ELEMENT,I=r.valuesPerElement*i.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,w=e.offset/Uint32Array.BYTES_PER_ELEMENT,x=e.stride/Uint32Array.BYTES_PER_ELEMENT;u?h(v[0],I,c,w,x,s):y(v,g,I,c,w,x,s)}(u[f]);return c.buffer},t.processAndInterleaveNormals=function(e,t,r,a,n){if("none"===e)g(n);else{var o=d.createTypedView(r,t.params.vertexAttributes.normal),s="earth-centered"===e?a:null;!function(e,t,r){var a=e.length/3,n=t.data,o=t.offsetIdx,s=t.strideIdx;if(null!=r)for(var i=r,c=i[0],f=i[1],u=i[2],d=i[4],l=i[5],y=i[6],h=i[8],m=i[9],A=i[10],p=0;p<a;p++){var b=e[3*p],E=e[3*p+1],g=e[3*p+2];P[0]=c*b+f*E+u*g,P[1]=d*b+l*E+y*g,P[2]=h*b+m*E+A*g,v.encodeNormal(P,_),n[o+p*s]=v.encodeInt16(_[0]),n[o+p*s+1]=v.encodeInt16(_[1])}else for(var p=0;p<a;p++)P[0]=e[3*p],P[1]=e[3*p+1],P[2]=e[3*p+2],v.encodeNormal(P,_),n[o+p*s]=v.encodeInt16(_[0]),n[o+p*s+1]=v.encodeInt16(_[1])}(o,n.normals,s)}},t.computeCompressedNormals=g;var O,T=65536;t.extractPositionData=function(e,t,r){var a=t[0];if(null==a||"position"!==a.name||5126!==a.type)return null;for(var n=new Float32Array(e),o=a.stride/4,s=a.offset/4,i=3*n.length/o,c=new Float32Array(i),f=0;f<i/3;f++)c[3*f]=n[f*o+s],c[3*f+1]=n[f*o+s+1],c[3*f+2]=n[f*o+s+2];var d=u.default(c.buffer,3,r);return d.uniqueCount<T?{data:new Float32Array(d.buffer),indices:new Uint16Array(d.indices)}:{data:new Float32Array(d.buffer),indices:d.indices}},t.isGeometryEngineLoaded=I,t.loadGeometryEngine=function(){return n(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return I()?[2,O]:[4,o.create(function(e,t){return Promise.resolve().then(function(){var t=[r(241)];e.apply(null,t)}.bind(this)).catch(r.oe)})];case 1:return[2,O=e.sent()]}})})},t.acquireMaskFilterContext=function(e,t,r,a){var n=r.spatialReference||t.spatialReference,o=t.renderSpatialReference,s={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};s.rings[0][4]=s.rings[0][0];var i=a.objectTransformation,c=a.getGeometryRecords()[0].geometry,f={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};f.rings[0][3]=f.rings[0][0];var u=O[e];return u||(console.error("Spatial relationship",e,"not supported"),u=function(){return!0}),{type:e,mask:r,maskSR:n,renderSR:o,aabb:s,transform:i,geometry:c,triangle:f,testFunction:u}},t.getIntersectRelation=w,t.intersectMaskWithMbs=function(e,t){var r={x:t[0],y:t[1],hasZ:!1,hasM:!1,type:"point",spatialReference:e.maskSR};return x(e,O.buffer(r,t[3],1,!0))};var S=Math.pow(2,-32);t.filterMask=function(e,t){var r=t.type,a=t.mask,n=t.transform,o=t.renderSR,s=t.maskSR,c=t.geometry,f=t.triangle,u=t.testFunction,d=t.aabb;c.getComponentAABB(e,R);var y=[d.rings[0][0],d.rings[0][1],d.rings[0][2],d.rings[0][3]];i.vec3.set(y[0],R[0],R[1],0),i.vec3.set(y[1],R[0],R[4],0),i.vec3.set(y[2],R[3],R[4],0),i.vec3.set(y[3],R[3],R[1],0);for(var h=0;h<4;++h)i.vec3.transformMat4(y[h],y[h],n),l.vectorToVector(y[h],o,y[h],s);switch(delete d._geVersion,w(t,x(t,d))){case 1:return!1;case 0:return!0}var m,A=f.rings[0][0],p=f.rings[0][1],b=f.rings[0][2],E=c.data.getIndices(v.VertexAttrConstants.POSITION),g=c.data.componentOffsets,I=c.data.getAttribute(v.VertexAttrConstants.POSITION),M=I.data,O=I.offsetIdx,T=I.strideIdx,P=g.length?g[e]:0,_=g.length?g[e+1]:E.length;switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":m=function(){return u(a,f)?0:2};break;case"contains":case"disjoint":case"within":default:m=function(){return u(a,f)?2:1}}for(h=P;h<_;h+=3){var N=O+T*E[h+0],U=O+T*E[h+1],C=O+T*E[h+2];i.vec3.set(A,M[N+0],M[N+1],M[N+2]),i.vec3.set(p,M[U+0],M[U+1],M[U+2]),i.vec3.set(b,M[C+0],M[C+1],M[C+2]),i.vec3.transformMat4(A,A,n),i.vec3.transformMat4(p,p,n),i.vec3.transformMat4(b,b,n),l.vectorToVector(A,o,A,s),l.vectorToVector(p,o,p,s),l.vectorToVector(b,o,b,s);var V=p[0]-A[0],G=p[1]-A[1],L=b[0]-A[0],D=b[1]-A[1];if(!(Math.abs(V*D-G*L)<S))switch(delete f._geVersion,m()){case 1:return!1;case 0:return!0}}switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":return!1;case"contains":case"disjoint":case"within":default:return!0}};var R=f.create(),P=c.vec3f32.create(),_=s.vec2f32.create()}.apply(null,a))||(e.exports=n)},2229:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r(21),r(10),r(6),r(64),r(38),r(370)],void 0===(n=function(e,t,r,a,n,o,s,i){function c(e,t,r){var a,s,i,c=n.vec3f64.create(),f=e[3],u=Math.ceil(Math.log(f)*Math.LOG2E/v),d=Math.pow(2,u*v+l);if(r.isGeographic){var y=d/o.earthRadius*180/Math.PI;s=Math.round(e[1]/y);var h=Math.max(-90,Math.min(90,s*y)),m=y/Math.cos((Math.abs(h)-y/2)/180*Math.PI),A=(a=Math.round(e[0]/m))*m;c[0]=A,c[1]=h}else a=Math.round(e[0]/d),s=Math.round(e[1]/d),c[0]=a*d,c[1]=s*d;var p=e[2]+t;return i=Math.round(p/d),c[2]=i*d,{center:c,id:u+"_"+a+"_"+s+"_"+i}}Object.defineProperty(t,"__esModule",{value:!0});var f=1e3,u=new Float64Array(3*f),d=n.vec3f64.create();t.computeGlobalTransformation=function(e,t,a,n){var o=c(e,t,a).center,i=r.mat4f64.create();return s.computeLinearTransformation(a,o,i,n),i},t.reprojectPoints=function(e,t,r,n,o,i,c){var l=e.data,v=e.offsetIdx,y=e.strideIdx;a.vec3.copy(d,t),d[2]+=n;var h=[0,0,0],m=l.length/y;s.vectorToVector(d,o,h,i);for(var A=0;A<m;A+=f){for(var p=Math.min(f,m-A),b=0;b<p;b++){var E=v+y*(A+b);u[3*b+0]=l[E+0]+h[0],u[3*b+1]=l[E+1]+h[1],u[3*b+2]=l[E+2]+h[2]}for(s.bufferToBuffer(u,i,0,u,c,0,p),b=0;b<p;b++){var g=u[3*b+0],I=u[3*b+1],w=u[3*b+2],x=v+y*(A+b);l[x+0]=r[0]*g+r[4]*I+r[8]*w+r[12],l[x+1]=r[1]*g+r[5]*I+r[9]*w+r[13],l[x+2]=r[2]*g+r[6]*I+r[10]*w+r[14]}}},t.createOrigin=function(e,t,r,a){var n=c(e,t,r),o=n.center,f=n.id;return s.vectorToVector(o,r,o,a),i.fromVector(o,f)};var l=1,v=5-l}.apply(null,a))||(e.exports=n)}}]);