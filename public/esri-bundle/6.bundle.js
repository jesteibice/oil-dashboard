(function(){(this||window).webpackJsonp.registerAbsMids({"esri/portal/support/layersCreator":383,"esri/portal/support/portalLayers":2121,"esri/layers/support/lazyLayerLoader":2196,"esri/portal/support/mapNotesUtils":2224})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[6,25],{2121:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(4),n(23),n(31),n(15),n(7),n(2196),n(148),n(2224)],void 0===(a=function(e,r,n,t,a,i,o,c,u,l){function s(e){switch(e.type){case"Map Service":return function(e){return p(e).then(function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}})}(e);case"Feature Service":return function(e){return L(e).then(function(e){if("object"==typeof e){var r={outFields:["*"]};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}})}(e);case"Feature Collection":return function(e){return e.load().then(function(){return e.fetchData()}).then(function(e){if(e&&Array.isArray(e.layers)){if(l.isMapNotesLayer(e))return{className:"MapNotesLayer"};if(1===e.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}(e);case"Scene Service":return function(e){return L(e).then(function(r){if("object"==typeof r){var n={},t=void 0;if(null!=r.id?(n.layerId=r.id,t=e.url+"/layers/"+r.id):t=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var a={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},i=0,o=Object.keys(a);i<o.length;i++){var c=o[i];if(-1!==e.typeKeywords.indexOf(c))return{className:a[c]}}return f(t).then(function(e){var r="SceneLayer",t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&t[e.layerType]&&(r=t[e.layerType]),{className:r,properties:n}})}return{className:"GroupLayer"}})}(e);case"Image Service":return function(e){return p(e).then(function(r){var n=new a(e.typeKeywords);return r?n.find(function(e){return"elevation 3d layer"===e.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return o.reject(new i("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function y(e){return(0,c.layerLookupMap[e.className])().then(function(r){return{constructor:r,properties:e.properties}})}function p(e){return f(e.url).then(function(e){return e.tileInfo})}function L(e){return!e.url||e.url.match(/\/\d+$/)?o.resolve({}):e.load().then(function(){return e.fetchData()}).then(function(r){return r&&Array.isArray(r.layers)?1===r.layers.length&&{id:r.layers[0].id}:f(e.url).then(function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}})})}function f(e){return t(e,{responseType:"json",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(r,"__esModule",{value:!0}),r.fromItem=function(e){return!e.portalItem||e.portalItem instanceof u||e.portalItem.constructor&&e.portalItem.constructor._meta||(e=n({},e,{portalItem:new u(e.portalItem)})),function(e){return e.load().then(s).then(y)}(e.portalItem).then(function(r){var t=n({portalItem:e.portalItem},r.properties),a=r.constructor;return o.resolve(new a(t))})},r.selectLayerClassPath=s}.apply(null,t))||(e.exports=a)},2196:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(7)],void 0===(a=function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.layerLookupMap={CSVLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(481)];e.apply(null,r)}.bind(this)).catch(n.oe)})},ElevationLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(286)];e.apply(null,r)}.bind(this)).catch(n.oe)})},FeatureLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(181)];e.apply(null,r)}.bind(this)).catch(n.oe)})},GroupLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(477)];e.apply(null,r)}.bind(this)).catch(n.oe)})},GeoRSSLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(482)];e.apply(null,r)}.bind(this)).catch(n.oe)})},ImageryLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(483)];e.apply(null,r)}.bind(this)).catch(n.oe)})},KMLLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(486)];e.apply(null,r)}.bind(this)).catch(n.oe)})},MapImageLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(359)];e.apply(null,r)}.bind(this)).catch(n.oe)})},MapNotesLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(815)];e.apply(null,r)}.bind(this)).catch(n.oe)})},OpenStreetMapLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(487)];e.apply(null,r)}.bind(this)).catch(n.oe)})},PointCloudLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(488)];e.apply(null,r)}.bind(this)).catch(n.oe)})},SceneLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(489)];e.apply(null,r)}.bind(this)).catch(n.oe)})},BuildingSceneLayer:function(){return t.create(function(e){return n.e(20).then(function(){var r=[n(2120)];e.apply(null,r)}.bind(this)).catch(n.oe)})},IntegratedMeshLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(485)];e.apply(null,r)}.bind(this)).catch(n.oe)})},StreamLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(490)];e.apply(null,r)}.bind(this)).catch(n.oe)})},TileLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(288)];e.apply(null,r)}.bind(this)).catch(n.oe)})},UnknownLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(816)];e.apply(null,r)}.bind(this)).catch(n.oe)})},UnsupportedLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(817)];e.apply(null,r)}.bind(this)).catch(n.oe)})},VectorTileLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(360)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WebTileLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(287)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WMSLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(491)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WMTSLayer:function(){return t.create(function(e){return Promise.resolve().then(function(){var r=[n(818)];e.apply(null,r)}.bind(this)).catch(n.oe)})},BingMapsLayer:function(){return t.create(function(e){return n.e(7).then(function(){var r=[n(479)];e.apply(null,r)}.bind(this)).catch(n.oe)})}}}.apply(null,t))||(e.exports=a)},2224:function(e,r,n){var t,a;t=[n.dj.c(e.i),r],void 0===(a=function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isMapNotesLayer=function(e){var r=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"],n=e.layers||e.featureCollection&&e.featureCollection.layers;if(n&&Array.isArray(n)){var t=n[0];return t.layerDefinition&&Array.isArray(t.layerDefinition.fields)&&t.layerDefinition.fields.forEach(function(e){var n=r.indexOf(e.name);n>-1&&r.splice(n,1)}),!r.length}}}.apply(null,t))||(e.exports=a)},383:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(9),n(11),n(31),n(26),n(7),n(2196),n(148),n(2224),n(2121),n(503)],void 0===(a=function(e,r,n,t,a,i,o,c,u,l,s,y){function p(e,r,a){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return(t=new e).read(r,a.context),[4,y.loadStyleRenderer(t,a.context)];case 1:return n.sent(),[2,t]}})})}function L(e,r){return t(this,void 0,void 0,function(){return n(this,function(n){switch(n.label){case 0:return[4,f(e,r)];case 1:return[2,p(n.sent(),e,r)]}})})}function f(e,r){return t(this,void 0,void 0,function(){var t,a,i,o,y,p,L,f;return n(this,function(n){switch(n.label){case 0:return t=r.context,a=function(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=M;break;case"ground":r=m;break;default:r=S}break;default:switch(e.layerContainerType){case"basemap":r=T;break;default:r=I}}return r}(t),!(i=e.layerType||e.type)&&r&&r.defaultLayerType&&(i=r.defaultLayerType),o=a[i],y=o?c.layerLookupMap[o]:c.layerLookupMap.UnknownLayer,"Feature Collection"!==e.type?[3,4]:e.itemId?[4,(p=new u({id:e.itemId,portal:t&&t.portal})).load()]:[3,3];case 1:return n.sent(),[4,s.selectLayerClassPath(p)];case 2:L=n.sent(),f=L.className||"UnknownLayer",y=c.layerLookupMap[f],n.label=3;case 3:return[3,5];case 4:"ArcGISFeatureLayer"===i&&l.isMapNotesLayer(e)&&(y=c.layerLookupMap.MapNotesLayer),n.label=5;case 5:return e.wmtsInfo&&(y=c.layerLookupMap.WMTSLayer),[2,y()]}})})}function d(e,r,i){return t(this,void 0,void 0,function(){var t,o,c;return n(this,function(n){switch(n.label){case 0:return t=new a,o=h(t,Array.isArray(r.layers)?r.layers:[],i),[4,e];case 1:return c=n.sent(),[4,o];case 2:return n.sent(),"group"===c.type?(c.layers.addMany(t),[2,c]):[2]}})})}function h(e,r,a){return t(this,void 0,void 0,function(){var t,i,c,u,l,s,y,p,f;return n(this,function(n){switch(n.label){case 0:if(!r)return[2];for(t=[],i=0,c=r;i<c.length;i++)u=c[i],l=L(u,a),"GroupLayer"===u.layerType?t.push(d(l,u,a)):t.push(l);return[4,o.eachAlways(t)];case 1:for(s=n.sent(),y=0,p=s;y<p.length;y++)f=p[y],v&&f.error?console.error(f.error.toString?f.error.toString():f.error):!f.value||a.filter&&!a.filter(f.value)||e.add(f.value);return[2]}})})}Object.defineProperty(r,"__esModule",{value:!0});var v=i("dojo-debug-messages"),S={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},m={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},M={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},I={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},T={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};r.createLayer=L,r.populateOperationalLayers=function(e,r,a){return t(this,void 0,void 0,function(){return n(this,function(n){return[2,h(e,r,a)]})})}}.apply(null,t))||(e.exports=a)}}]);