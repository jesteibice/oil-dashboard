(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/layers/VectorTileLayerView3D":2159,"esri/views/3d/layers/LayerView3D":2176,"esri/views/3d/layers/support/layerViewUpdatingProperties":2180,"esri/views/3d/layers/TiledLayerView3D":2199})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{2159:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(29),r(2),r(848),r(2334),r(2337),r(2199)],void 0===(n=function(e,t,r,i,n,a,l,o,p,s,c){return function(e){function t(t){return e.call(this)||this}return r(t,e),t.prototype.initialize=function(){var e,t=this,r=this.layer.compatibleTileInfo256,i=this._getTileInfoSupportError(r,this.layer.fullExtent);i?this.addResolvingPromise(n.reject(i)):e=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var e,r=t.view.basemapTerrain.tilingScheme,i=r.pixelSize[0];t.schemaHelper=new o(i,t.view.spatialReference.isGeographic),e=256===i?t.layer.compatibleTileInfo256:t.view.spatialReference.isGeographic?t.layer.compatibleTileInfo512:t.layer.tileInfo;var n=t._getTileInfoCompatibilityError(e,r);if(n)throw n;t._set("tileInfo",e)});var l=n.createAbortController();this.tileHandler=new p(this.layer,this.view.pixelRatio,!1,null);var c=this.tileHandler.start({signal:l.signal}),u=this.tileHandler.spriteMosaic;u.then(function(e){return t.renderer=new s(e,t.tileHandler.glyphMosaic,!1)}),this.watch(["layer.currentStyleInfo","view.pixelRatio"],function(){t._tileHandlerController.abort();var e=new p(t.layer,t.view.pixelRatio,!1,null),r=new AbortController,i=e.start({signal:r.signal}),a=e.spriteMosaic;n.all([i,a]).then(function(r){var i=r[1],n=t.tileHandler,a=t.renderer;t.renderer=new s(i,e.glyphMosaic,!1),t.tileHandler=e,t.emit("data-changed"),n.destroy(),a&&a.dispose()})}),this._tileHandlerController=l;var d=n.all([e,c,u]);this.addResolvingPromise(d)},t.prototype.destroy=function(){this.renderer.dispose(),this.renderer=null,this.tileHandler.destroy(),this.tileHandler=null},Object.defineProperty(t.prototype,"dataLevelRange",{get:function(){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return 1===i.minLevel&&256===this.tileInfo.size[0]&&(i.minLevel=0),i},enumerable:!0,configurable:!0}),i([l.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([l.property()],t.prototype,"layer",void 0),i([l.property()],t.prototype,"tileInfo",void 0),i([l.property()],t.prototype,"dataLevelRange",null),i([l.property()],t.prototype,"updatingPercentageValue",void 0),i([l.subclass("esri.views.3d.layers.VectorTileLayerView3D")],t)}(l.declared(c))}.apply(null,i))||(e.exports=n)},2176:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(7),r(29),r(2),r(473),r(2174)],void 0===(n=function(e,t,r,i,n,a,l,o,p){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return r(t,e),t.prototype.postscript=function(e){this.inherited(arguments),o.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,r){a.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var i=o.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);i?r(i):t()})})},i([l.property()],t.prototype,"view",void 0),i([l.property()],t.prototype,"slicePlaneEnabled",void 0),i([l.subclass("esri.views.3d.layers.LayerView3D")],t)}(l.declared(p))}.apply(null,i))||(e.exports=n)},2180:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,i))||(e.exports=n)},2199:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1),r(0),r(4),r(15),r(2),r(2176),r(2180),r(203)],void 0===(n=function(e,t,r,i,n,a,l,o,p,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isUpdating=!1,t}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLevelRange",{get:function(){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayLevelRange",{get:function(){var e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,r=this.layer.maxScale||e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return this.layer.maxScale&&i.maxLevel++,i},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,r){return this.layer.getTileUrl(e,t,r)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var r=s.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(r){var i={layer:this.layer,error:r},n=void 0;switch(r.name){case"tilingscheme:local-gcs-not-supported":n=new a("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",i);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":n=new a("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",i);break;default:n=new a("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",i)}return n}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new a("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype.levelRangeFromScaleRange=function(e,t){var r={minLevel:0,maxLevel:1/0},i=this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!i)return r;var n=i.levels[0],a=function(e){var t=Math.log(n.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(r.minLevel=Math.max(0,a(e))),null!=t&&t>0&&(r.maxLevel=Math.max(0,a(t))),r},i([l.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),i([l.property(p.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([l.property(p.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),i([l.property({readOnly:!0})],t.prototype,"fullExtent",void 0),i([l.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),i([l.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme"]})],t.prototype,"dataLevelRange",null),i([l.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme","layer.minScale","layer.maxScale"]})],t.prototype,"displayLevelRange",null),i([l.property()],t.prototype,"layer",void 0),i([l.property({readOnly:!0})],t.prototype,"tileInfo",void 0),i([l.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(l.declared(o))}.apply(null,i))||(e.exports=n)}}]);