(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/data/executeTileQuery":2282,"esri/views/2d/layers/features/controllers/StreamController":2652,"esri/layers/graphics/data/StreamStore":2653,"esri/core/CircularArray":2654,"esri/layers/graphics/sources/connections/GeoEventConnection":2655,"esri/layers/graphics/sources/connections/StreamConnection":2656,"esri/views/2d/layers/features/controllers/support/DispatchQueue":2657})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{2282:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(4),r(9),r(11),r(116),r(44),r(74),r(811),r(361)],void 0===(i=function(e,t,r,n,i,o,s,u,a,c){function d(e,t,r,n,i,o,s,u){s&&!o?n.forEachInBounds(i,function(n){if(!t.has(n.objectId)){var i=c.getCentroid(r,n,u),o=n.attributes;i&&(t.add(n.objectId),e.push(new a.Feature(o,n.localId,null,i)))}}):o&&!s?n.forEachInBounds(i,function(n){if(!t.has(n.objectId)){var i=n.attributes,o=c.getGeometry(r,n,0,u);o&&(t.add(n.objectId),e.push(new a.Feature(i,n.localId,o,null)))}}):n.forEachInBounds(i,function(n){if(!t.has(n.objectId)){var i=n.attributes,o=c.getGeometry(r,n,0,u),s=c.getCentroid(r,n,u);o&&s&&(t.add(n.objectId),e.push(new a.Feature(i,n.localId,o,s)))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.executeTileQueryForIds=function(e,t,r){var n=r.pixelBuffer*t.resolution,i=s.pad(t.bounds,n,s.create()),o=[];return e.featureStore.forEachInBounds(i,function(t){return o.push(e.featureAdapter.getObjectId(t))}),o},t.executeTileQuery=function(e,t,r){var n=r.returnGeometry,i=r.returnCentroid,a=r.pixelBuffer,c=new o.default,h=[],l=a*t.resolution,p=s.pad(t.bounds,l,s.create());if(d(h,c,e,e.featureStore,p,n,i,{originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),"esriGeometryPoint"===e.geometryType||i){var f=u.getInfo(e.spatialReference);if(f){var _=f.valid,y=_[0],v=_[1];if(p[0]<y){var b=s.fromValues(v-l,p[1],v,p[3]);d(h,c,e,e.featureStore,b,n,i,{originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[v,t.bounds[3]]})}if(p[2]>v){var g=s.fromValues(y,p[1],y+l,p[3]);d(h,c,e,e.featureStore,g,n,i,{originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[y-v+t.bounds[0],t.bounds[3]]})}}}return h.sort(function(t,r){return t.attributes[e.objectIdField]-r.attributes[e.objectIdField]}),{features:h,objectIds:c}}}.apply(null,n))||(e.exports=i)},2652:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(4),r(9),r(11),r(135),r(231),r(47),r(26),r(14),r(2),r(183),r(2282),r(2653),r(2655),r(2283),r(2657)],void 0===(i=function(e,t,r,n,i,o,s,u,a,c,d,h,l,p,f,_,y,v,b){Object.defineProperty(t,"__esModule",{value:!0});var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stream",t._tileDispatchMap=new a.default,t._updateIntervalId=0,t}return r(t,e),t.prototype.initialize=function(){var e=this,t=this.service,r=t.source,n=t.objectIdField,i=t.timeInfo,o=t.maximumTrackPoints,s=t.purgeOptions,u=t.serviceFilter;this.connection=new y.default(r,this.spatialReference,u),this._set("store",new _.default(n,i,this.geometryInfo,o,s)),this.connection.on("feature",function(t){return e._onFeature(t)}),this.store.events.on("update",function(t){var r=t.addOrUpdated,n=t.removed;return e._onUpdate(r,n)}),["connectionStatus","errorString"].forEach(function(t){e.watch("connection."+t,function(r){return e.remoteClient.invoke("setProperty",{propertyName:t,value:r})})}),this._updateIntervalId=setInterval(function(){return e.store.checkForUpdates()},64),this._set("queryEngine",this._createQueryEngine(this.store)),this._shouldPushDataReceived=this.service.enableDataRecieved},t.prototype.destroy=function(){clearInterval(this._updateIntervalId),this.connection.destroy(),this.queryEngine.destroy(),this._tileDispatchMap.forEach(function(e){return e.destroy()})},Object.defineProperty(t.prototype,"updating",{get:function(){return this._tempQueryEngine&&!!this._tempQueryEngine.featureStore.numFeatures||this._anyUpdatesQueued()},enumerable:!0,configurable:!0}),t.prototype.update=function(e,t){return s(this,void 0,void 0,function(){var r,n,i=this;return o(this,function(o){switch(o.label){case 0:return this.validateConfig(e,t),r=this.renderer.getAttributeHash(),this._set("config",e),[4,this.updatePixelBuffer()];case 1:return o.sent(),"heatmap"===this.renderer.type?[2]:r===this.renderer.getAttributeHash()?[3,3]:(n=this.queryEngine.featureStore,[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)]);case 2:o.sent(),n.forEach(function(e){return i.attributeStore.setAttributeData(e.localId,e,i.geometryInfo,i.viewParams)}),o.label=3;case 3:return[4,this.attributeStore.updateFilters(this)];case 4:return o.sent(),[4,this.attributeStore.sendUpdates()];case 5:return o.sent(),[2]}})})},t.prototype.invalidate=function(){this._repushActiveTiles()},t.prototype.onEdits=function(e){},t.prototype.queryFeatures=function(e){return c.safeCast(this.queryEngine.executeQuery(e))},t.prototype.queryFeatureCount=function(e){return c.safeCast(this.queryEngine.executeQueryForCount(e))},t.prototype.queryObjectIds=function(e){return c.safeCast(this.queryEngine.executeQueryForIds(e))},t.prototype.queryExtent=function(e){return c.safeCast(this.queryEngine.executeQueryForExtent(e))},t.prototype.queryLatestObservations=function(e){return c.safeCast(this.queryEngine.executeQueryForLatestObservations(e))},t.prototype.redraw=function(){},t.prototype.refresh=function(){},t.prototype.setViewState=function(e){var t=this,r=this.viewState&&this.viewState.scale;this.inherited(arguments),r!==this.viewState.scale&&this.attributeStore.hasScaleExpr&&(this.queryEngine.featureStore.forEach(function(e){return t.attributeStore.setAttributeData(e.localId,e,t.geometryInfo,t.viewParams)}),this.attributeStore.sendUpdates())},t.prototype.onTileUpdate=function(e){var t=this,r=e.added;e.removed.forEach(function(e){return t._handleTileRemove(e)}),r.forEach(function(e){return t._handleTileAdd(e)})},t.prototype.enableEvent=function(e){"data-received"===e.name&&(this._shouldPushDataReceived=e.value)},t.prototype._onFeature=function(e){this._shouldPushDataReceived&&this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}});try{var t=this.geometryInfo,r=t.geometryType,n=t.hasM,i=t.hasZ,o=p.convertFromFeature(e,r,i,n,this.store.objectIdField);this.store.add(o)}catch(e){d("esri-2d-debug")&&console.debug(e)}},t.prototype._createStoreWithFeatures=function(e){if(h.isNone(e))return null;var t=this._createFeatureStore(!1);return t.addMany(e),t},t.prototype._onUpdate=function(e,t){var r=this;h.isSome(e)&&e.forEach(function(e){return r.onFeatureAdd(e)});var n=this._createStoreWithFeatures(e),i=this._createStoreWithFeatures(t);this.attributeStore.sendUpdates(),this.processor.supportsTileUpdates?this._updateActiveTiles(n,i):this._repushActiveTiles(),h.isSome(t)&&t.forEach(function(e){return r.onFeatureRemove(e)})},t.prototype._handleTileAdd=function(e){if(this._tileDispatchMap.has(e.id)){(t=this._tileDispatchMap.get(e.id)).up()}else{var t=new b.default;this._tileDispatchMap.set(e.id,t)}this._queryTileFeatures(e,!0,this.queryEngine)},t.prototype._handleTileRemove=function(e){this._tileDispatchMap.get(e.id).destroy(),this._tileDispatchMap.delete(e.id)},t.prototype._anyUpdatesQueued=function(){return u.from(this._tileDispatchMap).some(function(e){return e[0],e[1].hasAction()})},t.prototype._updateActiveTiles=function(e,t){for(var r=this,n=h.applySome(e,function(e){return r._createQueryEngine(e)}),i=h.applySome(t,function(e){return r._createQueryEngine(e)}),o=0,s=this.tileStore.tiles;o<s.length;o++){var u=s[o];this._queryTileFeatures(u,!1,n,i)}},t.prototype._repushActiveTiles=function(){for(var e=0,t=this.tileStore.tiles;e<t.length;e++){var r=t[e];this._queryTileFeatures(r,!0,this.queryEngine)}},t.prototype._queryTileFeatures=function(e,t,r,n){var i=this,o={hasZ:!1,hasM:!1,transform:{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}},s=this.queryInfo,u={returnCentroid:s.returnCentroid,returnGeometry:s.returnGeometry,pixelBuffer:this._pixelBuffer},a=this._tileDispatchMap.get(e.id),c=h.applySome(r,function(t){return f.executeTileQuery(t,e,u)}),d=h.mapOr(c,[],function(e){return e.features}),l=h.mapOr(n,[],function(t){return f.executeTileQueryForIds(t,e,u)}).map(function(e){return i.attributeStore.getLocalId(e)});a.enqueue(function(r){return i.processor.onTileData(e,{addOrUpdate:d,remove:l,clear:t,transformParams:o},{signal:r})})},n([l.property()],t.prototype,"connection",void 0),n([l.property()],t.prototype,"service",void 0),n([l.property({readOnly:!0})],t.prototype,"store",void 0),n([l.property({readOnly:!0})],t.prototype,"queryEngine",void 0),n([l.property()],t.prototype,"updating",null),n([l.subclass("esri.views.2d.layers.features.controllers.StreamController")],t)}(l.declared(v.default));t.default=g}.apply(null,n))||(e.exports=i)},2653:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(12),r(2654),r(14),r(823)],void 0===(i=function(e,t,r,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";var u=function(e){function r(r,n,i,s,u,a){void 0===a&&(a=128);var c=e.call(this,i)||this;return c._trackIdToObservations=new Map,c._idCounter=0,c._lastPurge=Date.now(),c._addOrUpdated=new Map,c._removed=[],c._maxAge=0,c._timeInfo=n,c._maximumTrackCount=s,c._purgeOptions=u,c.purgeInterval=a,c.objectIdField=o.unwrapOr(r,t.DEFAULT_STREAM_ID_FIELD),c._useGeneratedIds=c.objectIdField===t.DEFAULT_STREAM_ID_FIELD,c}return n(r,e),r.prototype.add=function(t){this._useGeneratedIds&&(t.attributes[this.objectIdField]=this._nextId(),t.objectId=t.attributes[this.objectIdField]),e.prototype.add.call(this,t),this._addOrUpdated.set(t.objectId,t);var r=t.attributes[this._timeInfo.trackIdField];this._trackIdToObservations.has(r)||this._trackIdToObservations.set(r,new i.default(this._maximumTrackCount)),this._maxAge=Math.max(this._maxAge,t.attributes[this._timeInfo.startTimeField]);var n=this._trackIdToObservations.get(r),s=t.attributes[this.objectIdField],u=n.enqueue(s);if(o.isSome(u)){var a=this.removeById(u);o.isSome(a)&&(this._addOrUpdated.has(u)?this._addOrUpdated.delete(u):this._removed.push(a))}},r.prototype.checkForUpdates=function(){var e=this._getToAdd(),t=this._getToRemove(),r=Date.now();r-this._lastPurge>=this.purgeInterval&&(this._purge(),this._lastPurge=r),(e||t)&&this.events.emit("update",{addOrUpdated:e,removed:t})},r.prototype._getToAdd=function(){if(!this._addOrUpdated.size)return null;var e=new Array(this._addOrUpdated.size),t=0;return this._addOrUpdated.forEach(function(r){return e[t++]=r}),this._addOrUpdated.clear(),e},r.prototype._getToRemove=function(){var e=this._removed;return this._removed.length?(this._removed=[],e):null},r.prototype._nextId=function(){var e=this._idCounter;return this._idCounter=(this._idCounter+1)%4294967294+1,e},r.prototype._purge=function(){var e=this._purgeOptions;o.isSome(e)&&(this._purgeSomeByDisplayCount(e),this._purgeByAge(e))},r.prototype._purgeSomeByDisplayCount=function(e){var t=this;if(e.displayCount){var r=this.numFeatures;r>e.displayCount&&this._trackIdToObservations.forEach(function(n,i){if(r>e.displayCount&&n.size){var s=t.removeById(n.dequeue());o.isSome(s)&&t._removed.push(s),r--}})}},r.prototype._purgeByAge=function(e){if(e.age){var t=60*e.age*1e3,r=this._maxAge-t,n=this._timeInfo.startTimeField;this.removeIf(this._removed,function(e){return e.attributes[n]<r})}},r}(s.default);t.default=u}.apply(null,n))||(e.exports=i)},2654:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.size=0,this._start=0,this.maxSize=e,this._buffer=new Array(e)}return e.prototype.enqueue=function(e){if(this.size===this.maxSize){var t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return this._buffer[(this._start+this.size++)%this.maxSize]=e,null},e.prototype.dequeue=function(){if(0===this.size)throw new Error("Cannot dequeue from empty buffer");var e=this._buffer[this._start];return this.size--,this._start=(this._start+1)%this.maxSize,e},e}();t.default=r}.apply(null,n))||(e.exports=i)},2655:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(9),r(0),r(11),r(1),r(23),r(15),r(13),r(14),r(7),r(2),r(181),r(2656),r(484),r(163)],void 0===(i=function(e,t,r,n,i,o,s,u,a,c,d,h,l,p,f,_){Object.defineProperty(t,"__esModule",{value:!0});var y,v=a.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection");!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(y=t.ReadyState||(t.ReadyState={}));var b=function(e){function t(t,r,n,i,o,s){void 0===i&&(i=5),void 0===o&&(o=3);var u=e.call(this)||this;return u.errorString=null,u._source=t,u._spatialReference=r,u._filter=n,u._outFields=s,u._maxQueryDepth=i,u._maxRecordCountFactor=o,u._open(),u}return o(t,e),t.prototype._open=function(){return i(this,void 0,void 0,function(){var e,t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,this._fetchServiceDefinition(this._source)];case 1:return(e=r.sent()).timeInfo.trackIdField?[4,this._fetchWebSocketUrl(e.streamUrls,this._spatialReference)]:(v.error(new u("geoevent-connection","Found an invalid GeoEvent service configuration. No TrackIdField found. Unable to establish WebSocket connection.")),[2]);case 2:return t=r.sent(),this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),[4,this._buddyServicesQuery];case 3:return r.sent(),[4,this._tryCreateWebSocket(t)];case 4:return r.sent(),n=this._filter,i=this._outFields,this._setFilter(n,i),[2]}})})},t.prototype.destroy=function(){c.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null},Object.defineProperty(t.prototype,"connectionStatus",{get:function(){if(c.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case y.CONNECTING:case y.OPEN:return"connected";case y.CLOSING:case y.CLOSED:return"disconnected"}},enumerable:!0,configurable:!0}),t.prototype._tryCreateWebSocket=function(e,t){return void 0===t&&(t=1e3),i(this,void 0,void 0,function(){var n,i,o;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),n=this,[4,this._createWebSocket(e)];case 1:return n._websocket=r.sent(),this.notifyChange("connectionStatus"),[3,4];case 2:return i=r.sent(),o=t/1e3,v.error(new u("geoevent-connection","Failed to connect. Attempting to reconnect in "+o+"s",i)),[4,d.after(t)];case 3:return r.sent(),[2,this._tryCreateWebSocket(e,1.5*t)];case 4:return[2]}})})},t.prototype._createWebSocket=function(e){var t=this,r=new WebSocket(e),n=d.create(function(e,t){r.onopen=function(){return e(r)},r.onclose=function(e){return t(e)}});return n.then(function(){r.onclose=function(e){return t._onClose(e)},r.onerror=function(e){return t._onError(e)},r.onmessage=function(e){return t._onMessage(e)}}),n},t.prototype._onMessage=function(e){var t;try{t=this._enrich(JSON.parse(e.data))}catch(e){return void v.error(new u("geoevent-connection","Failed to parse message",e))}this.onFeature(t)},t.prototype._onError=function(e){var t="Encountered an error over WebSocket connection";this._set("errorString",t),v.error("geoevent-connection",t)},t.prototype._onClose=function(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&v.error("geoevent-connection","WebSocket closed unexpectedly with error code "+e.code),this._open()},t.prototype._fetchServiceDefinition=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(r){switch(r.label){case 0:return[4,s(e,{query:{f:"json"},responseType:"json"})];case 1:return t=r.sent(),n=t.data,this._serviceDefinition=n,[2,n]}})})},t.prototype._fetchWebSocketUrl=function(e,t){return i(this,void 0,void 0,function(){var n,i,o;return r(this,function(r){return n=e[0],i=n.urls,o=n.token,[2,this._inferWebSocketBaseUrl(i)+"/subscribe?outSR="+t.wkid+(o?"&token="+o:"")]})})},t.prototype._inferWebSocketBaseUrl=function(e){if(1===e.length)return e[0];for(var t=0,r=e;t<r.length;t++){var n=r[t];if(-1!==n.indexOf("wss"))return n}return v.error(new u("geoevent-connection","Unable to infer WebSocket url",e)),null},t.prototype._setFilter=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,s,a,h,l=this;return r(this,function(r){return n=this._websocket,this._filter=e,this._outFields=t,c.isNone(n)||c.isNone(e)&&c.isNone(t)?[2]:(i=JSON.stringify({filter:this._serializeFilter(e,t)}),o=!1,s=d.createResolver(),a=function(){o||(l._websocket===n&&v.error(new u("geoevent-connection","Server timed out when setting filter")),s.reject())},h=function(e){var t=JSON.parse(e.data);t.filter&&(t.error&&(v.error(new u("geoevent-connection","Failed to set service filter",t.error)),l._set("errorString","Could not set service filter - "+t.error),s.reject(t.error)),n.onmessage=l._onMessage.bind(l),o=!0,s.resolve())},n.onmessage=h,n.send(i),setTimeout(a,1e4),[2,s.promise])})})},t.prototype._serializeFilter=function(e,t){var r={};return c.isNone(e)&&c.isNone(t)?r:(c.isSome(e)&&e.geometry&&(r.geometry=JSON.stringify(e.geometry)),c.isSome(e)&&e.where&&(r.where=e.where),c.isSome(t)&&(r.outFields=t.join(",")),r)},t.prototype._enrich=function(e){if(!this._relatedFeatures)return e;var t=this._serviceDefinition.relatedFeatures.joinField,r=e.attributes[t];if(!this._relatedFeatures.has(r))return v.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;var n=this._relatedFeatures.get(r),i=n.attributes,o=n.geometry;for(var s in i)e.attributes[s]=i[s];return o&&(e.geometry=o),e.geometry||e.centroid||v.error(new u("geoevent-connection","Found malformed feature - no geometry found",e)),e},t.prototype._queryBuddyServices=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o,s,a,c,d,h;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=this._serviceDefinition,t=e.relatedFeatures,n=e.keepLatestArchive,i=this._queryRelatedFeatures(t),o=this._queryArchive(n),[4,i];case 1:return r.sent(),[4,o];case 2:if(!(s=r.sent()))return[2];for(a=0,c=s.features;a<c.length;a++)d=c[a],this.onFeature(this._enrich(d));return[3,4];case 3:return h=r.sent(),v.error(new u("geoevent-connection","Encountered an error when querying buddy services",{error:h})),[3,4];case 4:return[2]}})})},t.prototype._queryRelatedFeatures=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(r){switch(r.label){case 0:return e?[4,this._queryBuddy(e.featuresUrl)]:[2];case 1:return t=r.sent(),this._addRelatedFeatures(t),[2]}})})},t.prototype._queryArchive=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){return e?[2,this._queryBuddy(e.featuresUrl)]:[2]})})},t.prototype._queryBuddy=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s,u,a,d,h;return r(this,function(r){switch(r.label){case 0:return[4,(t=new l({url:e})).load()];case 1:return n=r.sent().capabilities,i=n.query.supportsMaxRecordCountFactor,o=n.query.supportsPagination,s=n.query.supportsCentroid,u=this._maxRecordCountFactor,a=i?t.maxRecordCount*u:t.maxRecordCount,(d=new _).outFields=c.unwrapOr(this._outFields,["*"]),d.where=c.unwrapOr(c.get(this._filter,"where"),"1=1"),d.returnGeometry=!0,d.returnExceededLimitFeatures=!0,d.outSpatialReference=this._spatialReference,s&&(d.returnCentroid=!0),i&&(d.maxRecordCountFactor=u),o?(d.num=a,t.destroy(),[2,this._queryPages(e,d)]):[4,f.executeQuery(e,d)];case 2:return h=r.sent(),t.destroy(),[2,h.data]}})})},t.prototype._queryPages=function(e,t,n,o){return void 0===n&&(n=[]),void 0===o&&(o=0),i(this,void 0,void 0,function(){var i;return r(this,function(r){switch(r.label){case 0:return t.start=o*t.num,[4,f.executeQuery(e,t)];case 1:return(i=r.sent().data).exceededTransferLimit&&o<this._maxQueryDepth?(i.features.forEach(function(e){return n.push(e)}),[2,this._queryPages(e,t,n,o+1)]):(n.forEach(function(e){return i.features.push(e)}),[2,i])}})})},t.prototype._addRelatedFeatures=function(e){for(var t=new Map,r=e.features,n=this._serviceDefinition.relatedFeatures.joinField,i=0,o=r;i<o.length;i++){var s=o[i],u=s.attributes[n];t.set(u,s)}this._relatedFeatures=t},n([h.property()],t.prototype,"connectionStatus",null),n([h.property()],t.prototype,"errorString",void 0),n([h.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],t)}(h.declared(p.default));t.default=b}.apply(null,n))||(e.exports=i)},2656:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(50),r(353),r(2)],void 0===(i=function(e,t,r,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onFeature=function(e){this.emit("feature",e)},r([s.subclass("esri.layers.graphics.sources.connections.StreamConnection")],t)}(s.declared(o,i));t.default=u}.apply(null,n))||(e.exports=i)},2657:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(7)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._action=null,this._queue=[],this._abortController=r.createAbortController(),this._refs=1}return e.prototype.up=function(){this._refs++},e.prototype.down=function(){return 0==--this._refs},e.prototype.clear=function(){this._abortController.abort(),this._abortController=r.createAbortController()},e.prototype.destroy=function(){this._queue.length=0,this._action&&(this._action=null)},e.prototype.enqueue=function(e){this._action?this._queue.push(e):this._setAction(e)},e.prototype.flush=function(){var e=this._action;if(!e)return r.resolve();var t=this._abortController.signal,n=this._queue.reduce(function(e,r){return e.then(function(){return r(t)})},e);return this._action=n.then(this._handleNext.bind(this)),this._queue.length=0,n},e.prototype.hasAction=function(){return!!this._action},e.prototype._setAction=function(e){var t=this._abortController.signal;this._action=e(t).then(this._handleNext.bind(this))},e.prototype._handleNext=function(){this._queue.length?this._setAction(this._queue.shift()):this._action=null},e}();t.default=n}.apply(null,n))||(e.exports=i)}}]);