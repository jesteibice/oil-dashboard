(function(){(this||window).webpackJsonp.registerAbsMids({"esri/geometry/support/meshUtils/ElevationSamplerWorker":2124,"esri/geometry/support/meshUtils/elevationSampler":2136,"esri/core/libs/rbush/PooledRBush":2210})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[32,29],{2124:function(t,e,n){var i,r;i=[n.dj.c(t.i),e,n(9),n(11),n(26),n(14),n(2210)],void 0===(r=function(t,e,n,i,r,a,o){function h(t,e,n,i){return{minX:Math.min(t[e+0],t[n+0],t[i+0]),maxX:Math.max(t[e+0],t[n+0],t[i+0]),minY:Math.min(t[e+1],t[n+1],t[i+1]),maxY:Math.max(t[e+1],t[n+1],t[i+1]),p0:[t[e+0],t[e+1],t[e+2]],p1:[t[n+0],t[n+1],t[n+2]],p2:[t[i+0],t[i+1],t[i+2]]}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(){}return t.prototype.createIndex=function(t,e){return i(this,void 0,void 0,function(){var i,r,h,s;return n(this,function(n){switch(n.label){case 0:return i=new Array,t.vertexAttributes&&t.vertexAttributes.position?(r=this.createMeshData(t),a.isSome(e)?[4,e.invoke("createIndexThread",r,{transferList:i})]:[3,2]):[2,new o.default];case 1:return s=n.sent(),[3,3];case 2:s=this.createIndexThread(r).result,n.label=3;case 3:return h=s,[2,this.createPooledRBush().fromJSON(h)]}})})},t.prototype.createIndexThread=function(t){var e=new Float64Array(t.position),n=this.createPooledRBush();return t.components?this.createIndexComponentsThread(n,e,t.components.map(function(t){return new Uint32Array(t)})):this.createIndexAllThread(n,e)},t.prototype.createIndexAllThread=function(t,e){for(var n=new Array(e.length/9),i=0,r=0;r<e.length;r+=9)n[i++]=h(e,r+0,r+3,r+6);return t.load(n),{result:t.toJSON()}},t.prototype.createIndexComponentsThread=function(t,e,n){for(var i=0,r=0,a=n;r<a.length;r++){i+=(c=a[r]).length/3}for(var o=new Array(i),s=0,l=0,u=n;l<u.length;l++)for(var c=u[l],p=0;p<c.length;p+=3)o[s++]=h(e,3*c[p+0],3*c[p+1],3*c[p+2]);return t.load(o),{result:t.toJSON()}},t.prototype.createMeshData=function(t){var e=t.vertexAttributes.position.buffer;return!t.components||t.components.some(function(t){return!t.faces})?{position:e}:{position:e,components:t.components.map(function(t){return t.faces})}},t.prototype.createPooledRBush=function(){return new o.default(9,r("csp-restrictions")?function(t){return t}:[".minX",".minY",".maxX",".maxY"])},t}();e.ElevationSamplerWorker=s,e.default=s}.apply(null,i))||(t.exports=r)},2136:function(t,e,n){var i,r;i=[n.dj.c(t.i),e,n(9),n(12),n(11),n(14),n(182),n(164),n(6),n(2124),n(504),n(41),n(851),n.dj.m(t)],void 0===(r=function(t,e,n,i,r,a,o,h,s,l,u,c,p,m){function f(){return++v,M&&(clearTimeout(M),M=0),y||(y=h.open(o.getAbsMid("./ElevationSamplerWorker",t,m)).catch(function(t){return null}))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(t,e){return r(this,void 0,void 0,function(){var i,r;return n(this,function(n){switch(n.label){case 0:return[4,f()];case 1:return i=n.sent(),[4,x.createIndex(t,i)];case 2:return r=n.sent(),function(t){--v,a.isSome(t)&&0===v&&(M=setTimeout(function(){t.close(),y=null,M=0},Y))}(i),[2,new d(t,r,e)]}})})};var d=function(t){function e(e,n,i){var r=t.call(this)||this;return r.rindex=n,r.demResolution={min:0,max:0},r.spatialReference=e.spatialReference.clone(),r.extent=e.extent.clone(),r.noDataValue=a.isSome(i)&&i.noDataValue||0,r}return i(e,t),e.prototype.elevationAt=function(t){var e=this.projectIfRequired(t,this.spatialReference),n=Number.NEGATIVE_INFINITY;return c.ray.fromValues([e.x,e.y,0],[0,0,-1],g),this.rindex.search({minX:e.x,maxX:e.x,minY:e.y,maxY:e.y},function(t){p.intersectRay(t,g,X)&&X[2]>n&&(n=X[2])}),n===Number.NEGATIVE_INFINITY?this.noDataValue:n},e}(u.ElevationSamplerBase),x=new l.default,v=0,y=null,M=0,Y=1e4,g=c.ray.fromValues([0,0,0],[0,0,-1]),X=s.vec3f64.create()}.apply(null,i))||(t.exports=r)},2210:function(t,e,n){var i,r;i=[n.dj.c(t.i),e,n(117),n(831)],void 0===(r=function(t,e,n,i){function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function a(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,i,r){r||(r=x(null,!0)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a=e,o=void 0;a<n;a++)o=t.children[a],h(r,t.leaf?i(o):o);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function s(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function m(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,a-i)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function x(t,e){return{children:t,height:1,leaf:e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,a){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=r)){var h=e+Math.ceil((n-e)/r/2)*r;i(t,h,e,n,a),o.push(e,h,h,n)}}Object.defineProperty(e,"__esModule",{value:!0});var y=function(){function t(t,e){void 0===t&&(t=9),this.compareMinX=s,this.compareMinY=l,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}return t.prototype.destroy=function(){this.clear(),M.prune(),Y.prune(),g.prune(),X.prune()},t.prototype.all=function(t){this._all(this.data,t)},t.prototype.search=function(t,e){var n=this.data,i=this.toBBox;if(d(t,n))for(M.clear();n;){for(var r=0,a=n.children.length;r<a;r++){var o=n.children[r],h=n.leaf?i(o):o;d(t,h)&&(n.leaf?e(o):f(t,h)?this._all(o,e):M.push(o))}n=M.pop()}},t.prototype.collides=function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(M.clear();e;){for(var i=0,r=e.children.length;i<r;i++){var a=e.children[i],o=e.leaf?n(a):a;if(d(t,o)){if(e.leaf||f(t,o))return!0;M.push(a)}}e=M.pop()}return!1},t.prototype.load=function(t,e){if(void 0===e&&(e=t.length),!e)return this;if(e<this._minEntries){for(var n=0,i=e;n<i;n++)this.insert(t[n]);return this}var r=this._build(t.slice(0,e),0,e-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},t.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},t.prototype.clear=function(){return this.data=x([],!0),this},t.prototype.remove=function(t,e){if(!t)return this;var n,i,a,o,h=this.data,s=this.toBBox(t);for(g.clear(),X.clear();h||g.length;){if(h||(h=g.pop(),n=g.data[g.length-1],i=X.pop(),a=!0),h.leaf&&-1!==(o=r(t,h.children,e)))return h.children.splice(o,1),g.push(h),this._condense(g),this;a||h.leaf||!f(h,s)?n?(i++,h=n.children[i],a=!1):h=null:(g.push(h),X.push(i),i=0,n=h,h=h.children[0])}return this},t.prototype.toJSON=function(){return this.data},t.prototype.fromJSON=function(t){return this.data=t,this},t.prototype._all=function(t,e){for(Y.clear();t;){if(!0===t.leaf)for(var n=0,i=t.children;n<i.length;n++){e(i[n])}else Y.pushArray(t.children);t=Y.pop()}},t.prototype._build=function(t,e,n,i){var r,o=n-e+1,h=this._maxEntries;if(o<=h)return a(r=x(t.slice(e,n+1),!0),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(h)),h=Math.ceil(o/Math.pow(h,i-1))),(r=x([],!1)).height=i;var s=Math.ceil(o/h),l=s*Math.ceil(Math.sqrt(h));v(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var c=Math.min(u+l-1,n);v(t,u,c,s,this.compareMinY);for(var p=u;p<=c;p+=s){var m=Math.min(p+s-1,c);r.children.push(this._build(t,p,m,i-1))}}return a(r,this.toBBox),r},t.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!0!==e.leaf&&i.length-1!==n;){for(var r=1/0,a=1/0,o=void 0,h=0,s=e.children.length;h<s;h++){var l=e.children[h],c=u(l),m=p(t,l)-c;m<a?(a=m,r=c<r?c:r,o=l):m===a&&c<r&&(r=c,o=l)}e=o||e.children[0]}return e},t.prototype._insert=function(t,e,n){var i=this.toBBox,r=n?t:i(t);g.clear();var a=this._chooseSubtree(r,this.data,e,g);for(a.children.push(t),h(a,r);e>=0&&g.data[e].children.length>this._maxEntries;)this._split(g,e),e--;this._adjustParentBBoxes(r,g,e)},t.prototype._split=function(t,e){var n=t.data[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),h=x(n.children.splice(o,n.children.length-o),n.leaf);h.height=n.height,a(n,this.toBBox),a(h,this.toBBox),e?t.data[e-1].children.push(h):this._splitRoot(n,h)},t.prototype._splitRoot=function(t,e){this.data=x([t,e],!1),this.data.height=t.height+1,a(this.data,this.toBBox)},t.prototype._chooseSplitIndex=function(t,e,n){var i,r,a;i=r=1/0;for(var h=e;h<=n-e;h++){var s=o(t,0,h,this.toBBox),l=o(t,h,n,this.toBBox),c=m(s,l),p=u(s)+u(l);c<i?(i=c,a=h,r=p<r?p:r):c===i&&p<r&&(r=p,a=h)}return a},t.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:s,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},t.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,a=o(t,0,e,r),s=o(t,n-e,n,r),l=c(a)+c(s),u=e;u<n-e;u++){var p=t.children[u];h(a,t.leaf?r(p):p),l+=c(a)}for(u=n-e-1;u>=e;u--){p=t.children[u];h(s,t.leaf?r(p):p),l+=c(s)}return l},t.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)h(e.data[i],t)},t.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t.data[e].children.length?e>0?(n=t.data[e-1].children).splice(n.indexOf(t.data[e]),1):this.clear():a(t.data[e],this.toBBox)},t.prototype._initFormat=function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")},t}();e.PooledRBush=y;var M=new n,Y=new n,g=new n,X=new n({deallocator:null});e.default=y}.apply(null,i))||(t.exports=r)}}]);